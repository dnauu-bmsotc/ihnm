let introductionToAnalysisButton;
let introductionToAnalysis = [
	"Кванторы",
	"Множества чисел",
	"Определение функции",
	"Определение обратной функции",
	"Определение чётной, нечётной функций",
	"Определение периодической функции",
	"Определение элементарной и основной элементарной функции",
	"Определение сложной функции",
	"Определение графика функции",
	"Определение последовательности чисел",
	"Определение предела последовательности",
	"Арифметические операции конечных пределов",
	"Определение ограниченной последовательности",
	"Определение монотонных последовательностей",
	"Свойства сходящихся последовательностей",
	"Определение бесконечно малых и бесконечно больших функций",
	"Теоремы о предельных переходах для последовательностей",
	"Определение предельной точки последовательности",
	"Определение верхнего и нижнего пределов последовательности",
	"Теорема Больцано-Вейерштрасса",
	"Определение числа e",
	"Гиперболические функции",
	"Определение предела функции",
	"Геометрический смысл предела функции",
	"Определение предела функции в бесконечности",
	"Определение одностороннего предела",
	"Определение предельной точки функции",
	"Теорема о локально ограниченной функции",
	"Теорема о локальной знакоопределённости функции",
	"Теоремы о предельных переходах для функций",
	"Теорема о единственности предела",
	"Теорема о пределе сложной функции",
	"Замечательные пределы и их следствия",
	"Теорема о связи функции, её предела и бесконечно малой",
	"Свойства бесконечно малых функций",
	"Теорема о связи бесконечно малых и бесконечно больших",
	"Сравнимые бесконечно малые",
	"Теорема о пределах эквивалентных функций",
	"Непрерывная функция",
	"Непрерывная на интервале функция, непрерывная на отрезке функция",
	"Точка разрыва функции. Классификация точек разрыва",
];

let differentiationOfAFunctionOfOneVariableButton;
let differentiationOfAFunctionOfOneVariable = [
	"Производная функции",
	"Дифференцируемая на интервале функция",
	"Физический смысл производной",
	"Геометрический смысл производной",
	"Уравнения кастельной и нормали к функции",
	"Связь дифференцируемости и непрерывности",
	"Связь дифференцируемости и существования касательной",
	"Производная сложной функции",
	"Производная обратной функции",
	"Явное и параметрическое задание функции. Нахождение их производных",
	"Логарифмическое дифференцирование",
	"Дифференцирование функции вида $u(x)^{v(x)}$",
	"Производная n-го порядка",
	"Механический смысл второй производной",
	"Производная второго порядка неявно заданной функции",
	"Определение дифференциала функции",
	"Геометрический смысл дифференциала",
	"Теоремы об арифметических операциях дифференциала",
	"Теорема о дифференциале сложной функции и следсвтие",
	"Применение дифференциала для приближённых вычислений",
	"Теорема Ролля и её геометрическая интерпретация",
	"Теорема Лагранжа и её геометрический смысл и следсвтия",
	"Теорема Коши. Без доказательства",
	"Правило Лопиталя-Бернулли",
	"Формула Тейлора",
	"Возрастающие и убывающие функции",
	"Теорема об убывании дифференцируемой функции с отрицательной производной",
	"Точки минимума и максимума функции",
	"Необходимое условие экстремума. Достатоное условие экстремума",
	"Схема нахождения наибольшего и наименьшего значений функции на отрезке",
	"Определение выпуклой функции",
	"Определение точки перегиба",
	"Теорема о связи второй производной и выпуклости функции",
	"Достаточное условие существования точек перегиба",
	"Определение асимптоты",
	"Определение вертикальных наклонных и горизонтальных асимптот",
	"Схема исследования графика функции",
];

let indefiniteIntegralButton;
let indefiniteIntegral = [
	"Определение первообразной",
	"Определение неопределённого интеграла",
	"Подынтегральная функция, подынтегральное выражение",
	"Теорема о существовании неопределённого интеграла. Без доказательства",
	"Свойства неопределённого интеграла",
	"Методы интегрирования",
];

let trigonometryButton;
let trigonometry = [
	"$\\tan^2\\alpha+1=?$",
	"$\\cot^2\\alpha+1=?$",
	"$\\sin{2\\alpha}=?$",
	"$\\cos{2\\alpha}=?$",
	"$\\tan{2\\alpha}=?$",
	"$\\sin(\\alpha+\\beta)=?$",
	"$\\sin(\\alpha-\\beta)=?$",
	"$\\cos(\\alpha+\\beta)=?$",
	"$\\cos(\\alpha-\\beta)=?$",
	"$\\sin\\alpha+\\sin\\alpha=?$",
	"$\\sin\\alpha-\\sin\\alpha=?$",
	"$\\sin\\alpha+\\cos\\alpha=?$",
	"$\\cos\\alpha+\\cos\\alpha=?$",
	"$\\cos\\alpha-\\cos\\alpha=?$",
	"$2\\cos\\alpha\\cos\\beta=?$",
	"$2\\sin\\alpha\\sin\\beta=?$",
	"$2\\sin\\alpha\\cos\\beta=?$",
];

let abbreviatedMultiplicationFormulasButton;
let abbreviatedMultiplicationFormulas = [
	"$a^2-b^2=?$",
	"$(a+b)^2=?$",
	"$(a-b)^2=?$",
	"$a^3+b^3=?$",
	"$a^3-b^3=?$",
	"$(a+b)^3=?$",
	"$(a-b)^3=?$",
];

let derivativeTableButton;
let derivativeTable = [
	"$c'=?$",
	"$(u^n)'=?$",
	"$(a^u)'=?$",
	"$(\\log_au)'=?$",
	"$(\\sin u)'=?$",
	"$(\\cos u)'=?$",
	"$(\\tan u)'=?$",
	"$(\\cot u)'=?$",
	"$(\\arcsin u)'=?$",
	"$(\\arccos u)'=?$",
	"$(\\arccot u)'=?$",
	"$(\\tan u)'=?$",
	"$(\\arctan u)'=?$",
	"$(\\sh u)'=?$",
	"$(\\ch u)'=?$",
	"$(\\th u)'=?$",
	"$(\\cth u)'=?$",
];

let differentiatioRulesButton;
let differentiatioRules = [
	"$(c\\cdot f)'=?$",
	"$(u\\pm v)'=?$",
	"$(uv)'=?$",
	"$(\\frac uv)'=?$",
	"$(f(g))'=?$",
];

let integralTableButton;
let integralTable = [
	"$\\int u^\\alpha\\,du$=?",
	"$\\int\\frac{du}{u}=?$",
	"$\\int a^u\\,du=?$",
	"$\\int\\sin u\\,du=?$",
	"$\\int\\cos u\\,du=?$",
	"$\\int\\frac{du}{\\cos^2u}=?$",
	"$\\int\\frac{du}{\\sin^2u}=?$",
	"$\\int\\sh u\\,du=?$",
	"$\\int\\ch u\\,du=?$",
	"$\\int\\frac{du}{\\ch^2u}=?$",
	"$\\int\\frac{du}{\\sh^2u}=?$",
	"$\\int\\frac{du}{u^2+a^2}=?$",
	"$\\int\\frac{du}{u^2-a^2}=?$",
	"$\\int\\frac{du}{\\sqrt{u^2-a^2}}=?$",
	"$\\int\\frac{du}{\\sqrt{a^2+u^2}}=?$",
];

let equivalentInfinitelySmallFunctionsButton;
let equivalentInfinitelySmallFunctions = [
	"$\\sin x\\sim?\\quad(x\\to0)$",
	"$\\arcsin x\\sim?\\quad(x\\to0)$",
	"$\\tan x\\sim?\\quad(x\\to0)$",
	"$1-\\cos x\\sim?\\quad(x\\to0)$",
	"$\\ln(1+x)\\sim?\\quad(x\\to0)$",
	"$\\log_ax\\sim?\\quad(x\\to0)$",
	"$a^x-1\\sim?\\quad(x\\to0)$",
	"$(1+x)^m\\sim?\\quad(x\\to0)$",
];

function getQuestion(questions) {
	return questions[Math.floor(Math.random() * questions.length)];
}

function removeElementsKeepChildren(b) {
	while(b.length) {
    let parent = b[ 0 ].parentNode;
    while( b[ 0 ].firstChild ) {
        parent.insertBefore(  b[ 0 ].firstChild, b[ 0 ] );
    }
     parent.removeChild( b[ 0 ] );
}
}

function showQuestion(question) {
	katex.render("\\text{" + question + "}", questionEl, {
    throwOnError: true,
		macros: {'\\arccot': '\\operatorname{arccot}'},
	});
}

function ask(questions) {
	showQuestion(getQuestion(questions));
}

document.addEventListener("DOMContentLoaded", function() {
	questionEl = document.getElementById("question"); 
	
	introductionToAnalysisButton = document.getElementById("introduction-to-analysis-btn");
	introductionToAnalysisButton.addEventListener("click", ()=>ask(introductionToAnalysis));
	
	differentiationOfAFunctionOfOneVariableButton = document.getElementById("differentiation-of-a-function-of-one-variable-btn");
	differentiationOfAFunctionOfOneVariableButton.addEventListener("click", ()=>ask(differentiationOfAFunctionOfOneVariable));
	
	indefiniteIntegralButton = document.getElementById("indefinite-integral-btn");
	indefiniteIntegralButton.addEventListener("click", ()=>ask(indefiniteIntegral));
	
	trigonometryButton = document.getElementById("trigonometry-btn");
	trigonometryButton.addEventListener("click", ()=>ask(trigonometry));
	
	abbreviatedMultiplicationFormulasButton = document.getElementById("abbreviated-multiplication-formulas-btn");
	abbreviatedMultiplicationFormulasButton.addEventListener("click", ()=>ask(abbreviatedMultiplicationFormulas));
	
	derivativeTableButton = document.getElementById("derivative-table-btn");
	derivativeTableButton.addEventListener("click", ()=>ask(derivativeTable));
	
	differentiatioRulesButton = document.getElementById("differentiatio-rules-btn");
	differentiatioRulesButton.addEventListener("click", ()=>ask(differentiatioRules));
	
	integralTableButton = document.getElementById("integral-table-btn");
	integralTableButton.addEventListener("click", ()=>ask(integralTable));
	
	equivalentInfinitelySmallFunctionsButton = document.getElementById("equivalent-infinitely-small-functions-btn");
	equivalentInfinitelySmallFunctionsButton.addEventListener("click", ()=>ask(equivalentInfinitelySmallFunctions));
});