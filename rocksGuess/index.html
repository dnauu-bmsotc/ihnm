<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Геоморфология с основами геологии</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
		<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
		<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
		<style>
			body {
				font-family: sans-serif;
				font-size: 12px;
			}
			/* Minerals table styles */
			.mineral-class {
				margin: 8px;
				padding: 4px;
			}
			.mineral {
				display: inline-block;
				border: 1px solid black;
				margin: 4px;
				padding: 4px;
			}
			/* guess styles */
			button {
				margin: 1em;
			}
			#imgdiv {
				overflow:hidden;
			}
			#img {
				height: 256px;
			}
			/* rock tables styles */
			table {
				border-collapse: collapse;
			}
			table td {
				border: 1px solid black;
			}
		</style>
	</head>
	<body>
		<main>
			<div id="buttons">
				<button onclick="takeCollection('minerals5')">Минералы (ящик №5)</button>
				<button onclick="takeCollection('rocks5')">Горные породы (ящик №5)</button>
			</div>
			<div id="imgdiv">
				<img id="img"></img>
			</div>
			<p id="answer"></p>
			<details>
				<summary>Таблица минералов</summary>
				<div id="minerals"></div>
			</details>
			<details>
				<summary>Таблица метаморфических горных пород</summary>
				<table>
					<tbody>
						<tr style="height: 41px">
							<td class="s0" dir="ltr" colspan="8">Магматические горные породы</td>
						</tr>
						<tr style="height: 26px">
							<td class="s1" dir="ltr" rowspan="2">Химический класс SiO2%</td>
							<td class="s1" dir="ltr" rowspan="2">Название</td>
							<td class="s1" dir="ltr" colspan="2">Минеральный состав</td>
							<td class="s1" dir="ltr" rowspan="2">Структура</td>
							<td class="s1" dir="ltr" rowspan="2">Текстура</td>
							<td class="s1" dir="ltr" rowspan="2">Фация</td>
							<td class="s1" dir="ltr" rowspan="2">Преобладающие цвета пород</td>
						</tr>
						<tr style="height: 29px">
							<td class="s1" dir="ltr">Породообразующие</td>
							<td class="s1" dir="ltr">Второстепенные</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr" rowspan="3">Кислые (65-75)</td>
							<td class="s2" dir="ltr">Липарит</td>
							<td class="s2" dir="ltr" rowspan="3">Ортоклаз, микроклин, кварц*</td>
							<td class="s2" dir="ltr" rowspan="3">Плагиоклаз, роговая обманка, биотит, мусковит</td>
							<td class="s2" dir="ltr">Скрытокристаллическая</td>
							<td class="s2" dir="ltr">Пористая</td>
							<td class="s2" dir="ltr">Поверхностная</td>
							<td class="s2" dir="ltr" rowspan="3">Светлые, розовые</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Липаритовый порфир</td>
							<td class="s2" dir="ltr">Порфировая</td>
							<td class="s2" dir="ltr" rowspan="2">Плотная</td>
							<td class="s2" dir="ltr">Полуглубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Гранит</td>
							<td class="s2" dir="ltr">Полнокристаллическая</td>
							<td class="s2" dir="ltr">Глубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr" rowspan="3">Средние (52-65)</td>
							<td class="s2" dir="ltr">Андезит</td>
							<td class="s2" dir="ltr" rowspan="3">Плагиоклаз, роговая обманка</td>
							<td class="s2" dir="ltr" rowspan="3">Пироксен, биотит</td>
							<td class="s2" dir="ltr">Скрытокристаллическая</td>
							<td class="s2" dir="ltr">Пористая</td>
							<td class="s2" dir="ltr">Поверхностная</td>
							<td class="s2" dir="ltr" rowspan="3">Серые</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Андезитовый порфирит</td>
							<td class="s2" dir="ltr">Порфировая</td>
							<td class="s2" dir="ltr" rowspan="2">Плотная</td>
							<td class="s2" dir="ltr">Полуглубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Диорит</td>
							<td class="s2" dir="ltr">Полнокристаллическая</td>
							<td class="s2" dir="ltr">Глубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr" rowspan="3">Основные (40-52)</td>
							<td class="s2" dir="ltr">Базальт</td>
							<td class="s2" dir="ltr" rowspan="3">Плагиоклаз, пироксен**</td>
							<td class="s2" dir="ltr" rowspan="3">Роговая обманка</td>
							<td class="s2" dir="ltr">Скрытокристаллическая</td>
							<td class="s2" dir="ltr">Пористая</td>
							<td class="s2" dir="ltr">Поверхностная</td>
							<td class="s2" dir="ltr" rowspan="3">Тёмно-серые, чёрные</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Диабаз</td>
							<td class="s2" dir="ltr">Порфировая</td>
							<td class="s2" dir="ltr" rowspan="2">Плотная</td>
							<td class="s2" dir="ltr">Полуглубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Габбро</td>
							<td class="s2" dir="ltr">Полнокристаллическая</td>
							<td class="s2" dir="ltr">Глубинная</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr" rowspan="3">Ультраосновные (менее 40)</td>
							<td class="s2" dir="ltr">Пироксенит</td>
							<td class="s2" dir="ltr">Пироксен**</td>
							<td class="s2" dir="ltr">Оливин**</td>
							<td class="s2" dir="ltr" rowspan="3">Полнокристаллическая</td>
							<td class="s2" dir="ltr" rowspan="3">Плотная</td>
							<td class="s2" dir="ltr" rowspan="3">Глубинная</td>
							<td class="s2" dir="ltr" rowspan="3">Чёрые или тёмно-зелёные</td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Перидотит</td>
							<td class="s2" dir="ltr">Пироксен**, оливин*</td>
							<td class="s2"></td>
						</tr>
						<tr style="height: 20px">
							<td class="s2" dir="ltr">Дунит</td>
							<td class="s2" dir="ltr">Оливин*</td>
							<td class="s2" dir="ltr">Пироксен**</td>
						</tr>
						<tr style="height: 20px">
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
							<td class="s3"></td>
						</tr>
						<tr style="height: 20px">
							<td class="s3" dir="ltr">Примечания:</td>
							<td class="s4" dir="ltr" colspan="7">* — минералы, обозначенные звездочкой, являются показателем кислотности пород;</td>
						</tr>
						<tr style="height: 20px">
							<td class="s3" dir="ltr"></td>
							<td class="s3" dir="ltr" colspan="7">** — к группе пироксенов относится авгит и другие минералы из класса ценных силикатов.</td>
						</tr>
					</tbody>
				</table>
				В табл.2 не входят следующие породы:
				Пегматиты— крупно- и гигантозернистые горные породы. Раз-
				личают пегматиты, связанные с кислыми, основными и другими полно-
				кристаллическими породами. Пегматиты являются источниками многих
				полезных ископаемых (слюды, пьезосырья, драгоценных камней, редко-
				земельных элементов и т.д.).
				Обсидианы — вулканические стекла, представляющие собой стекло-
				видную породу различного цвета (преобладают черные, серые и бурые
				цвета, с раковистым изломом. По составу обсидианы чаще кислые, но
				бывают средние и основные.
				Пемзы — пористые, стекловатые породы, возникающие при вулка-
				нических извержениях кислых, средних, реже основных, богатых газами
				лав. Из-за большой пористости плотность пемз очень низкая (менее
				1,0 г/см3, плавают в воде).
				Пирокластические породы — возникают в результате вулканических
				выбросов частиц еще не застывшей лавы и обломков пород, слагающих
				жерло и кратер вулкана. Различают:
				вулканический пепел, размер частиц менее 0,5 мм;
				вулканический песок, размер частиц 0,5–2,0 мм;
				лапилли, размер частиц 20 – 30 мм;
				вулканические бомбы, размер частиц более 30 мм;
				вулканический туф, спекшиеся вулканические пепел и песок, со-
				держащие более крупные обломки.
			</details>
			<details>
				<summary>Таблица осадочных горных пород</summary>
				<img src="Обломочные.png"></img>
				<img src="Хемогенные и органогенные.png"></img>
			</details>
			<details>
				<summary>Таблица метаморфических горных пород</summary>
				<img src="Метаморфические.png"></img>
			</details>
		</main>
		<!-- Guess script -->
		<script>
			let collectionsMap = new Map();
			function takeCollection(folder) {
				if ($("#answer").text() || !$("#img").attr("src")) {
					$.ajax({
						url: folder + "/ls.txt",
						success: function (data) {
							if (!collectionsMap.has(folder)) {
								collectionsMap.set(folder, {
									past: [],
									future: data.match(/[^\s]*.jpg/g),
								});
							}
							if (collectionsMap.get(folder).future.length === 0) {
								collectionsMap.get(folder).future = collectionsMap.get(folder).past;
								collectionsMap.get(folder).past = [];
							}
							const randomId = Math.floor(Math.random() * collectionsMap.get(folder).future.length);
							collectionsMap.get(folder).past.push(collectionsMap.get(folder).future[randomId]);
							collectionsMap.get(folder).future.splice(randomId, 1);
							$("#img").attr("src", ``); // remove image
							$("#img").attr("src", `${folder}/${collectionsMap.get(folder).past[collectionsMap.get(folder).past.length - 1]}`);
							$("#img").css("transform", `
								scaleX(${1 - Math.floor(Math.random()*2)*2})
								scaleY(${1 - Math.floor(Math.random()*2)*2})
								rotate(${Math.floor(Math.random()*5)*90}deg)
								skewX(${Math.random()*10}deg)
								skewY(${Math.random()*10}deg)
							`);
							$("#img").css("filter", `
								brightness(${0.7+Math.random()*0.5})
								contrast(${0.7+Math.random()*0.5})
							`);
							$("#answer").text("");
						}
					});
				}
				else {
					$("#answer").text($("#img").attr("src").match(/[^//]*.jpg/));
				}
			}
		</script>
		<!-- Create minerals table in #minerals element -->
		<script>
			let data = {
				"Самородные элементы": {
					"Графит": "C",
					"Сера": "S",
				},
				"Сульфиды": {
					"Галенит (свинцовый блеск)": "PbS",
					"Пирит (серный колчедан)": "FeS_2",
					"Халькопирит (медный колчеан)": "CuFeS_2",
				},
				"Галогены": {
					"Галит": "NaCl",
					"Сильвин": "KCl",
					"Флюорит (плавиковый шпат)": "CaF_2",
				},
				"Оксиды и гидроксиды": {
					"Кварц": "SiO_2",
					"Халцедон": "SiO_2",
					"Кремень": "SiO_2",
					"Корунд": "Al_2O_3",
					"Магнетит (магнитный железняк)": "Fe_3O_4",
					"Гематит (красный железняк)": "Fe_2O_3",
					"Лимонит (бурый железняк)": "Fe_2O_3\\cdot nH_2O",
				},
				"Карбонаты": {
					"Кальцит (известковый шпат)": "Ca[CO_3]",
					"Доломит": "CaMg[CO_3]_2",
					"Малахит": "Cu_2[CO_3](OH)_2",
				},
				"Сульфаты": {
					"Ангидрит": "Ca[SO_4]",
					"Гипс": "Ca[SO_4]\\cdot 2H_2O",
				},
				"Фосфаты": {
					"Апатит": "Ca_5[PO_4]_3[F,Cl,OH]_2",
				},
				"Силикаты": {
					"Оливин": "",
					"Топаз": "",
					"Авгит": "",
					"Роговая обманка": "",
					"Тальк": "",
					"Мусковит (белая кальциевая слюда)": "",
					"Биотит (чёрная железомагнезиальная слюда)": "",
					"Ортоклаз": "",
					"Олигоклаз (группа плагиоклазов)": "",
					"Лабрадор (группа плагиоклазов)": "",
				},
			};

			for (const mineralClassName in data) {
				const mineralClassDiv = document.createElement("div");
				mineralClassDiv.className = "mineral-class";
				const mineralClassNameDiv = document.createElement("div");
				mineralClassNameDiv.className = "mineral-class-name";
				mineralClassNameDiv.innerHTML = mineralClassName;
				mineralClassDiv.appendChild(mineralClassNameDiv);

				for (const mineralName in data[mineralClassName]) {
					const mineralDiv = document.createElement("div");
					mineralDiv.className = "mineral";
					const mineralNameDiv = document.createElement("div");
					mineralNameDiv.innerHTML = mineralName;
					const mineralFormulaDiv = document.createElement("div");
					mineralFormulaDiv.innerHTML = "$$" + data[mineralClassName][mineralName] + "$$";
					mineralDiv.appendChild(mineralNameDiv);
					mineralDiv.appendChild(mineralFormulaDiv);
					mineralClassDiv.appendChild(mineralDiv);
				}

				document.getElementById("minerals").appendChild(mineralClassDiv);
			}
		</script>
	</body>
</html>
