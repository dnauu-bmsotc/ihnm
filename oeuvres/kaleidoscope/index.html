<!DOCTYPE html>
<html lang="ru">
	<head>
		<title>Калейдоскоп</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset="utf-8">
		<script src="./slider-animation.js"></script>
		<script src="./pentagonal-tiling-type5.js"></script>
		<style>
			#lever {
				display: inline-grid;
				grid-template-columns: 1fr 1fr;
				grid-template-rows: 1fr 1fr;
			}
			#slider-y {
				transform: rotate(90deg);
			}
			svg {
				border: 1px solid black;
			}
			#lever {
				display: inline-flex;
				flex-flow: column nowrap;
			}
		</style>
	</head>
	<body>
		<main>
			<div id="lens">
				<svg id="lens-svg" width="500" height="500" viewBox="0 0 100 100">
					<defs>
						<pattern id='pattern1' patternUnits='userSpaceOnUse' width='20' height='20' patternTransform='scale(0.1) rotate(0)'><rect x='0' y='0' width='100%' height='100%' fill='hsla(0,0%,100%,1)'/><path d='M10-10L20 0v10L10 0zM20 0L10-10V0l10 10zm0 10L10 0v10l10 10zm0 10L10 10v10l10 10zM0 20l10-10v10L0 30zm0-10L10 0v10L0 20zM0 0l10-10V0L0 10z'  stroke-width='0.5' stroke='hsla(258.5,59.4%,59.4%,1)' fill='none'/></pattern>
					</defs>
				</svg>
			</div>
			<div id="lever">
				<label>
					Скорость:
					<input type="range" min="1" max="99" value="10" id="speed-slider" oninput="onSpeedChange(this.value)">
				</label>
				<svg width="200" height="200" id="lever-svg" viewBox="0 0 100 100">
					<circle id="svg-dot" cx="50" cy="50" r="3"></circle>
				</svg>
			</div>
		</main>
		<script>
			let speed = Number(document.getElementById('speed-slider').value);
			(sliderX = createSliderAnimation(onXChange, speed))();
			(sliderY = createSliderAnimation(onYChange, speed))();
			
			createPentagonalTilingType5(document.getElementById("lens-svg"), "url(#pattern1)", {x: 50, y: 50}, 5, 3, 130, 4);

			function onXChange(position) {
				document.getElementById("svg-dot").setAttributeNS(null, "cx", position * 100);
			}
			
			function onYChange(position) {
				document.getElementById("svg-dot").setAttributeNS(null, "cy", position * 100);
			}

			function onSpeedChange(value) {
				sliderX.setSpeed(Number(value));
				sliderY.setSpeed(Number(value));
			}
		</script>
	</body>
</html>
